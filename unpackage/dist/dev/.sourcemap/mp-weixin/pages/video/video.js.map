{"version":3,"sources":["uni-app:///main.js","webpack:////Users/sun/Desktop/guiguyun-music-uni-app/pages/video/video.vue?7ca1","webpack:////Users/sun/Desktop/guiguyun-music-uni-app/pages/video/video.vue?852a","webpack:////Users/sun/Desktop/guiguyun-music-uni-app/pages/video/video.vue?30c0","webpack:////Users/sun/Desktop/guiguyun-music-uni-app/pages/video/video.vue?560a","uni-app:///pages/video/video.vue","webpack:////Users/sun/Desktop/guiguyun-music-uni-app/pages/video/video.vue?5afb","webpack:////Users/sun/Desktop/guiguyun-music-uni-app/pages/video/video.vue?39e9"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAozB,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0Ex0B,2F;AACA;AACA,MADA,kBACA;AACA;AACA,wBADA,EACA;AACA,eAFA,EAEA;AACA,mBAHA,EAGA;AACA,iBAJA,EAIA;AACA,yBALA,EAKA;AACA,wBANA,CAMA;AANA;AAQA,GAVA;AAWA,SAXA,qBAWA;AACA;AACA,GAbA;AAcA;AACA;AACA,qBAFA,+BAEA;AACA,4DADA,SACA,IADA;AAEA;AACA;AACA;AACA,gDALA;AAMA,KARA;AASA;AACA,aAVA,qBAUA,KAVA,EAUA;AACA;AACA,yCAFA,CAEA;AACA;AACA;AACA;AACA,qBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,KAxBA;AAyBA;AACA,gBA1BA,wBA0BA,KA1BA,EA0BA;AACA,6EADA,SACA,IADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBARA,GAQA,CARA;AASA,yBATA,GASA;AACA;AACA;AACA,iBAHA,CATA;;AAcA;AACA,2CAfA,CAeA;AAfA,6EAgBA,CA1CA;AA2CA;AACA,cA5CA,sBA4CA,KA5CA,EA4CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/DA;AAgEA;AACA,oBAjEA,4BAiEA,KAjEA,EAiEA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;;AAEA;;AAEA,KAnFA;AAoFA;AACA,eArFA,uBAqFA,KArFA,EAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5FA,EAdA,E;;;;;;;;;;;;AC3EA;AAAA;AAAA;AAAA;AAAy/C,CAAgB,q5CAAG,EAAC,C;;;;;;;;;;;ACA7gD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/video/video.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/video/video.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./video.vue?vue&type=template&id=3ec61a7e&scoped=true&\"\nvar renderjs\nimport script from \"./video.vue?vue&type=script&lang=js&\"\nexport * from \"./video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./video.vue?vue&type=style&index=0&id=3ec61a7e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ec61a7e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/video/video.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=template&id=3ec61a7e&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"videoContainer\">\n    <!-- 搜索头部区域 -->\n    <view class=\"header\">\n      <image src=\"/static/images/video/video.jpg\"></image>\n      <view class=\"search\" bindtap=\"goToSearch\">\n        搜索音乐\n      </view>\n      <image src=\"/static/images/logo.png\"></image>\n    </view>\n    <!-- 推荐导航区域 -->\n      <scroll-view\n          scroll-x\n          class=\"scrollContainer\"\n          enable-flex\n          scroll-with-animation\n      >\n        <view  class=\"scrollItem\" v-for=\"(item) in videoGroupList\" :key=\"item.id\">\n          <view class=\"scrollContent\" \n          :class=\"navId == item.id ? 'active' : ''\" \n          @click=\"changeNav\" :id=\"item.id\" \n          :data-id=\"item.id\">{{item.name}}</view>\n        </view>\n      </scroll-view>\n    <!-- 视频区域 -->\n        <scroll-view \n        class=\"scrollVideo\"  \n        scroll-y \n        bindrefresherrefresh=\"handleRefresher\"\n        refresher-enabled\n        :refresher-triggered=\"isTriggered\"\n        >\n            <view class=\"videoItem\" v-for=\"item in videoList\" :key=\"item.id\">\n                <video \n                class=\"common\"\n                :poster=\"item.data.coverUrl\" \n                :id=\"item.data.vid\" \n                @tap='handlePlay' \n                object-fit=\"cover\"\n                :src=\"item.data.urlInfo.url\"\n                v-if=\"videoId == item.data.vid\"\n                @timeupdate=\"handleTimeUpdate\"\n                @ended=\"handleEnded\"\n                ></video>\n                <image wx:else :id=\"item.data.vid\" class=\"common\" :src=\"item.data.coverUrl\" @tap='handlePlay'  />\n                  \n                <view class=\"scrollVideoContent\">\n                    <text class=\"text\">{{item.data.title}}</text>\n                    <view class=\"footer\">\n                        <view class=\"left\">\n                            <image class=\"avatar\" :src=\"item.data.creator.avatarUrl\" /> \n                            <text class=\"nickname\">{{item.data.creator.nickname}}</text>\n                        </view>\n                        <view class=\"right\">\n                            <text class=\"item\">\n                                <text class=\"iconfont icon-buoumaotubiao15\"></text>\n                                <text class=\"count\">{{item.data.praisedCount}}</text>\n                            </text>\n                            <text class=\"item\">\n                                <text class=\"iconfont icon-pinglun1\"></text>\n                                <text class=\"count\">{{item.data.commentCount}}</text>\n                            </text>\n                            <button open-type=\"share\" class=\"item btn\">\n                                <text class=\"iconfont icon-gengduo\"></text>\n                            </button>\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </scroll-view>\n  </view>\n</template>\n\n<script>\n  import request from \"../../api/request.js\"\n  export default {\n    data() {\n      return {\n        videoGroupList:[], // 获取视频标签列表数组\n        navId:'', // 控制激活样式的标识\n        videoList:[], // 视频数组\n        videoId:'',// 视频播放的id\n        videoUpdateTime: [], // 记录video播放的时长\n        isTriggered:false // 控制下拉刷新的标识\n      };\n    },\n    created() {\n      this.getVideoGroupList();\n    },\n    methods:{\n      // 获取推荐导航 /video/group/list\n        async getVideoGroupList(){\n          let data = await request('/video/group/list');\n            this.videoGroupList = data.data.slice(0,13);\n            this.navId = data.data[0].id;\n            // 此处调用导航对应下的视频数组,因为 能获取 navId\n           this.getVideoList(this.navId);\n        },\n        // 点击推荐导航事件\n          changeNav(event){\n            console.log(event)\n            let navId = event.currentTarget.id; // 通过id向event传参的时候如果传的是number会自动转换成string\n            // let navId = event.currentTarget.dataset.id;\n            // 加载loading状态\n            wx.showLoading({\n              title:'正在加载'\n            })\n              // 获取当前导航\n              this.navId = navId;\n              // 清空当前视频列表\n              this.videoList = [];\n            // 点击切换时加载数据\n            this.getVideoList(this.navId);\n          },\n          // 获取推荐导航下对应的视频信息,注意该接口需要用户登录\n            async getVideoList(navId){\n              let data = await request('/video/group',{id:this.navId});\n               // 关闭loading\n              if(data) {\n                // 关闭消息提示框\n                wx.hideLoading();\n              }\n              // 设置一个id用作遍历的 key\n              let index = 0;\n              let videoList = data.datas.map(item => {\n                item.id = index++;\n                return item;\n              })\n             \n                this.videoList = videoList\n                this.isTriggered = false // 控制下拉刷新的标识\n            },\n            // 处理多个视频播放的问题\n              handlePlay(event){\n                console.log(event.currentTarget.id)\n                // 1.获取上一个视频的id\n                let vid = event.currentTarget.id;\n            \n                // 判断当前id不是第一个视频\n                // this.vid && this.vid != event.currentTarget.id && this.videoContext && this.videoContext.stop();\n                // this.vid = vid;\n                // 更新视频id\n                  this.videoId = vid\n                // 创建控制video标签的实例对象\n                this.videoContext = wx.createVideoContext(vid);\n                // 判断当前的视频之前是否播放过，是否有播放记录, 如果有，跳转至指定的播放位置\n                let videoItem = this.videoUpdateTime.find(item => item.vid === vid);\n                if(videoItem){\n                  this.videoContext.seek(videoItem.currentTime);\n                }\n                // 自动播放\n                this.videoContext.play();\n              },\n              // 跳转到播放过视频的对应时长\n                handleTimeUpdate(event){\n                  let videoTimeObj = {vid: event.currentTarget.id, currentTime: event.detail.currentTime};\n                  /*\n                  * 思路： 判断记录播放时长的videoUpdateTime数组中是否有当前视频的播放记录\n                  *   1. 如果有，在原有的播放记录中修改播放时间为当前的播放时间\n                  *   2. 如果没有，需要在数组中添加当前视频的播放对象\n                  *\n                  * */\n                  let videoItem = this.videoUpdateTime.find(item => item.vid === videoTimeObj.vid);\n                  if(videoItem){ // 之前有\n                    videoItem.currentTime = event.detail.currentTime;\n                  }else { // 之前没有\n                    this.videoUpdateTime.push(videoTimeObj);\n                  }\n                  // 更新videoUpdateTime的状态\n                  \n                    // this.videoUpdateTim\n                \n                },\n                // 视频播放结束调用的回调\n                handleEnded(event){\n                  // 移除记录播放时长数组中当前视频的对象\n                  // let {videoUpdateTime} = this.data;\n                  this.videoUpdateTime.splice(this.videoUpdateTime.findIndex(item => item.vid === event.currentTarget.id), 1);\n                  // this.setData({\n                  //   videoUpdateTime\n                  // })\n                },\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n.videoContainer {\n    // 头部区域\n    .header {\n        display: flex;\n        padding: 10rpx;\n        image {\n            width: 60rpx;\n            height: 60rpx;\n        }\n        .search {\n            flex:1;\n            border: 1px solid #eee;\n            border-radius: 10rpx;\n            font-size: 24rpx;\n            text-align: center;\n            line-height: 60rpx;\n            margin: 0 20rpx;\n            color: #d43c33;\n        }\n    }\n    // 推荐列表区域\n    .scrollContainer {\n        display: flex;\n        white-space: nowrap;\n        height: 60rpx;\n        .scrollItem {\n            padding: 0 30rpx;\n            font-size: 28rpx;\n            height: 60rpx;\n            line-height: 60rpx;\n            .active {\n                border-bottom: 1rpx solid #d43c33;\n            }\n        }\n        // 防止 激活样式不在\n        .scrollContent {\n            height: 60rpx;\n            box-sizing: border-box;\n        }\n    }\n    // 视频区域\n    .scrollVideo{\n        // 固定导航区域,需要给 scroll-view 的高度,需要动态计算\n        height: calc(100vh - 152rpx);\n        margin-top: 10rpx;\n        .videoItem {\n            padding: 0 3%;\n            .common{\n                width: 100%;\n                height: 320rpx;\n                border-radius: 10rpx;\n            }\n            .scrollVideoContent{\n                \n                .text {\n                    font-size: 28rpx;\n                    width: 440rpx;\n                    height: 80rpx;\n                    line-height: 80rpx;\n                    // 单行文本溢出\n                    display: block;\n                    white-space: nowrap;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n                }\n                .footer {\n                    height: 100rpx;\n                    line-height: 100rpx;\n                    border-top: 1px solid #eee;\n                    display: flex;\n                    justify-content: space-between;\n                    .left {\n                        .avatar {\n                            width: 60rpx;\n                            height: 60rpx;\n                            vertical-align: middle;\n                            border-radius: 50%;\n                        }\n                        .nickname {\n                            margin-left: 20rpx;\n                            font-size: 28rpx;\n                        }\n                    }\n                    .right {\n                        display: flex;\n                        justify-content: space-between;\n                        align-items: center;\n                        .item {\n                            position: relative;\n                            width: 70rpx ;\n                            .count {\n                                position:absolute;\n                                top: -30rpx;\n                                font-size: 20rpx;\n                            }\n                        }\n                        button{\n                            width: 20rpx;\n                            display: inline;\n                            padding: 0;\n                            background-color: transparent;\n                            border-color: transparent;\n                            &:after {\n                                border: none;\n                              } \n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=style&index=0&id=3ec61a7e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=style&index=0&id=3ec61a7e&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1629282025134\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}